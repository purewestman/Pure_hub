<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Portworx ROI Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel (JSX support) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Recharts -->
  <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>

<body class="bg-slate-900 text-slate-100">

<div id="root"></div>

<script type="text/babel">

const {
  BarChart, Bar, XAxis, YAxis, CartesianGrid,
  Tooltip, ResponsiveContainer, AreaChart, Area, Legend
} = Recharts;

const PRESETS = {
  bank: { label: "Banking", baseDataTB: 500, downtimeHourlyCost: 250000 },
  retail: { label: "Retail", baseDataTB: 300, downtimeHourlyCost: 120000 },
  telco: { label: "Telco", baseDataTB: 800, downtimeHourlyCost: 400000 }
};

function App() {
  const [config, setConfig] = React.useState({
    baseDataTB: 200,
    annualGrowth: 0.2,
    downtimeHourlyCost: 100000,
    discount: 0
  });

  const [currency, setCurrency] = React.useState("USD");

  const FX = { USD: 1, ZAR: 18.5 };

  const format = v =>
    new Intl.NumberFormat("en-US", {
      style: "currency",
      currency,
      maximumFractionDigits: 0
    }).format(v * FX[currency]);

  const totalCSI = 4_500_000;
  const totalEss = 3_200_000;
  const totalEnt = 3_600_000 * (1 - config.discount / 100);

  const chartData = [
    { name: "CSI Only", value: totalCSI },
    { name: "PX Essentials", value: totalEss },
    { name: "PX Enterprise", value: totalEnt }
  ];

  return (
    <div className="min-h-screen p-6 max-w-6xl mx-auto space-y-6">

      <header className="flex justify-between items-center border-b border-slate-700 pb-4">
        <h1 className="text-xl font-bold">
          Portworx ROI Calculator
          <span className="text-orange-400 text-sm ml-2">by Pure Storage</span>
        </h1>

        <div className="flex gap-2">
          <button
            className="px-3 py-1 bg-slate-800 rounded"
            onClick={() => setCurrency(currency === "USD" ? "ZAR" : "USD")}
          >
            Currency: {currency}
          </button>
        </div>
      </header>

      <section className="grid grid-cols-3 gap-4">
        {Object.entries(PRESETS).map(([k, p]) => (
          <button
            key={k}
            className="bg-slate-800 hover:bg-slate-700 p-4 rounded"
            onClick={() => setConfig({ ...config, ...p })}
          >
            {p.label}
          </button>
        ))}
      </section>

      <section className="grid grid-cols-3 gap-6">
        <div className="bg-slate-800 p-4 rounded">
          <h3 className="text-slate-400">CSI Only</h3>
          <div className="text-2xl font-bold">{format(totalCSI)}</div>
        </div>
        <div className="bg-slate-800 p-4 rounded border border-green-500">
          <h3 className="text-slate-400">PX Essentials</h3>
          <div className="text-2xl font-bold">{format(totalEss)}</div>
        </div>
        <div className="bg-slate-800 p-4 rounded border border-orange-500">
          <h3 className="text-slate-400">PX Enterprise</h3>
          <div className="text-2xl font-bold">{format(totalEnt)}</div>
        </div>
      </section>

      <section className="h-72 bg-slate-800 p-4 rounded">
        <ResponsiveContainer width="100%" height="100%">
          <BarChart data={chartData}>
            <CartesianGrid strokeDasharray="3 3" stroke="#334155" />
            <XAxis dataKey="name" stroke="#cbd5e1" />
            <YAxis tickFormatter={v => format(v)} stroke="#cbd5e1" />
            <Tooltip formatter={v => format(v)} />
            <Bar dataKey="value" fill="#f97316" />
          </BarChart>
        </ResponsiveContainer>
      </section>

      <section className="bg-slate-800 p-4 rounded">
        <label className="text-sm">Enterprise Discount ({config.discount}%)</label>
        <input
          type="range"
          min="0"
          max="60"
          value={config.discount}
          onChange={e => setConfig({ ...config, discount: +e.target.value })}
          className="w-full"
        />
      </section>

      <footer className="text-[10px] text-slate-500 border-t border-slate-700 pt-4">
        Â© {new Date().getFullYear()} Pure Storage, Inc.  
        Portworx is a trademark of Pure Storage.  
        Illustrative model only. Not a commercial offer.
      </footer>

    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);

</script>

</body>
</html>
